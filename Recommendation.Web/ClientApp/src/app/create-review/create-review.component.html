<div class="mt-3 fs-1">
  Create review
</div>

<form [formGroup]="reviewForm" (ngSubmit)="onSubmit()">
  <div class="mb-4 mt-5">
    <label class="form-label fs-5">Review Image</label>

    <ngx-dropzone (change)="onSelect($event)" [multiple]="false" accept="image/jpeg,image/jpg,image/png">
      <ngx-dropzone-label>Click or drag</ngx-dropzone-label>
      <ngx-dropzone-preview *ngIf="file !== null" [removable]="true" (removed)="onRemove()">
        <ngx-dropzone-label>{{ file?.name }} ({{ file?.type }})</ngx-dropzone-label>
      </ngx-dropzone-preview>
    </ngx-dropzone>

    <div *ngIf="reviewForm.controls.image.invalid &&
        reviewForm.controls.image.errors &&
        (reviewForm.controls.image.dirty || reviewForm.controls.image.touched)">
      <small class="text-danger"
             *ngIf="reviewForm.controls.image.hasError('required')">
        This field is required
      </small>
    </div>
  </div>

  <div class="mb-4">
    <label for="review-name" class="form-label fs-5">Review name</label>
    <input type="text" class="form-control" id="review-name" formControlName="nameReview">

    <div *ngIf="reviewForm.controls.nameReview.invalid &&
        reviewForm.controls.nameReview.errors &&
        (reviewForm.controls.nameReview.dirty || reviewForm.controls.nameReview.touched)">
      <small class="text-danger"
             *ngIf="reviewForm.controls.nameReview.hasError('required')">
        This field is required
      </small>
      <small class="text-danger"
             *ngIf="reviewForm.controls.nameReview.hasError('minlength')">
        Minimum length 5 characters.
      </small>
    </div>
  </div>

  <div class="mb-4">
    <label for="name-described" class="form-label fs-5">Name of the described</label>
    <input type="text" class="form-control" id="name-described" formControlName="nameDescription">

    <div *ngIf="reviewForm.controls.nameDescription.invalid &&
        reviewForm.controls.nameDescription.errors &&
        (reviewForm.controls.nameDescription.dirty || reviewForm.controls.nameDescription.touched)">
      <small class="text-danger"
             *ngIf="reviewForm.controls.nameDescription.hasError('required')">
        This field is required
      </small>
      <small class="text-danger"
             *ngIf="reviewForm.controls.nameDescription.hasError('minlength')">
        Minimum length 5 characters.
      </small>
    </div>
  </div>

  <div class="mb-4">
    <div class="row">
      <div class="col-sm-6">
        <div class="fs-5 mb-2">Category</div>
        <select class="form-select mb-2" aria-label="Default select example" formControlName="category">
          <option selected>Open this select menu</option>
          <option value="One">One</option>
          <option value="Two">Two</option>
          <option value="Three">Three</option>
        </select>
      </div>
      <div class="col-sm-6">
        <div class="fs-5 mb-2">Hashtags</div>
        <input type="text" class="form-control mb-2" formControlName="hashtags">
      </div>
    </div>

    <div *ngIf="reviewForm.controls.category.invalid &&
        reviewForm.controls.category.errors &&
        (reviewForm.controls.category.dirty || reviewForm.controls.category.touched)">
      <small class="text-danger"
             *ngIf="reviewForm.controls.category.hasError('required')">
        This field is required
      </small>
    </div>
  </div>

  <div class="mb-4">
    <div class="fs-5 mb-2">Description</div>
    <textarea class="w-100" rows="7" formControlName="description"></textarea>

    <div *ngIf="reviewForm.controls.description.invalid &&
        reviewForm.controls.description.errors &&
        (reviewForm.controls.description.dirty || reviewForm.controls.description.touched)">
      <small class="text-danger"
             *ngIf="reviewForm.controls.description.hasError('required')">
        This field is required
      </small>
      <small class="text-danger"
             *ngIf="reviewForm.controls.description.hasError('minlength')">
        Minimum length 100 characters.
      </small>
    </div>
  </div>

  <div class="mb-4">
    <div class="fs-5 mb-2">Grade</div>
    <ngb-rating [(rate)]="grade" (rateChange)="onGradeChange()">
      <ng-template let-fill="fill" let-index="index">
        <i class="star bi-star{{fill === 100 ? '-fill' : ''}}"></i>
      </ng-template>
    </ngb-rating>
  </div>

  <div class="w-100 d-flex justify-content-center align-items-center">
    <button class="btn btn-danger mb-4 w-100 fs-5" [disabled]="!reviewForm.valid">Publish</button>
  </div>
</form>
